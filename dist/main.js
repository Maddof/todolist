(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}function n(t){const n=e(t);return n.setHours(0,0,0,0),n}function o(t){return e=t,o=Date.now(),+n(e)==+n(o);var e,o}function r(t,n){const o=e(t);return isNaN(n)?function(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}(t,NaN):n?(o.setDate(o.getDate()+n),o):o}function s(t,n){const o=+e(t),[r,s]=[+e(n.start),+e(n.end)].sort(((t,e)=>t-e));return o>=r&&o<=s}t.d({},{y:()=>K,F:()=>G});const c="tasks",a=function(){localStorage.setItem(c,JSON.stringify(G.tasksArr))};function i(t){return t.target.attributes.index.value}const l="projects",d=function(){localStorage.setItem(l,JSON.stringify(K.projectsArr))},u=document.getElementById("all-tasks-amount"),p=document.getElementById("today-tasks-amount"),m=document.getElementById("next7days-tasks-amount"),f=document.getElementById("important-tasks-amount");function y(){u.textContent=`(${function(){let t=0;for(let e=0;e<G.tasksArr.length;e++)t++;return t}()})`,m.textContent=`(${function(){const t=new Date,e=r(t,7);let n=0;return G.tasksArr.forEach(((o,r)=>{s(o.date,{start:t,end:e})&&n++})),n}()})`,f.textContent=`(${function(){let t=0;return G.tasksArr.forEach(((e,n)=>{"Important"===e.priority&&t++})),t}()})`,p.textContent=`(${function(){let t=0;return G.tasksArr.forEach(((e,n)=>{o(e.date)&&t++})),t}()})`}const g=document.querySelector(".tasks"),k=document.querySelector(".addtask-form"),v=document.querySelector(".addproject-form"),j=document.querySelector(".projects"),A=document.getElementById("project-selection"),E=document.querySelector(".tasks-filter"),b=document.getElementById("date");let h=document.querySelector(".currentview-title");function x(t){const e=new Date,n=r(e,7);g.innerHTML="",w(t),G.tasksArr.forEach(((t,o)=>{if(s(t.date,{start:e,end:n})){const e=V(t,o);g.insertAdjacentHTML("beforeend",e)}}))}function L(t){g.innerHTML="",w(t),G.tasksArr.forEach(((t,e)=>{if(o(t.date)){const n=V(t,e);g.insertAdjacentHTML("beforeend",n)}}))}g.addEventListener("click",(function(t){if(t.target.classList.contains("priority")){const e=i(t);"Not important"===G.tasksArr[e].priority?G.tasksArr[e].priority="Important":G.tasksArr[e].priority="Not important",R(),a()}})),g.addEventListener("click",(function(t){if(t.target.classList.contains("delete")){const e=i(t);G.tasksArr.splice(e,1),$(),R()}a()})),k.addEventListener("submit",(function(t){(function(t){t.preventDefault();let e=new FormData(k),n=Object.fromEntries(e);G.tasksArr.push(n),a()})(t),k.reset(),Y(),R(),y(),$()})),v.addEventListener("submit",(function(t){(function(t){t.preventDefault();let e=new FormData(v),n=Object.fromEntries(e);K.projectsArr.push(n),d()})(t),v.reset(),$(),D()})),E.addEventListener("click",(function(t){const e=t.target.childNodes[0].textContent.trim();switch(console.log(e),e){case"All Tasks":H();break;case"Next 7 days":x(e);break;case"Important":I(e);break;case"Today":L(e)}}));const D=function(){A.innerHTML="",K.projectsArr.forEach((t=>{const e=`\n      <option value="${t.name}">${t.name}</option>\n    `;A.insertAdjacentHTML("beforeend",e)}))},I=function(t){g.innerHTML="",w(t),G.tasksArr.forEach(((e,n)=>{if(e.priority===t){const t=V(e,n);g.insertAdjacentHTML("beforeend",t)}}))},C=function(t){g.innerHTML="",function(t){const e=A.children,n=t;[...e].forEach((t=>{t.value===n?t.setAttribute("selected",""):t.removeAttribute("selected","")}))}(t),G.tasksArr.forEach(((e,n)=>{if(e.project===t){const t=V(e,n);g.insertAdjacentHTML("beforeend",t)}}))};j.addEventListener("click",(t=>{t.target.classList.contains("project-btn")&&(C(t.target.value),w(t.target.value))}));const w=function(t){h.textContent=t||"My tasks"},H=function(){g.innerHTML="",w(),G.tasksArr.forEach(((t,e)=>{const n=V(t,e);g.insertAdjacentHTML("beforeend",n)}))},$=function(){j.innerHTML="",K.projectsArr.forEach(((t,e)=>{const n=`\n      <li class="project-item">\n        <button class="project-btn" index="${e}" value="${t.name}">\n        ${t.name} \n        <span class="project-task-count-info">\n        (${function(t){let e=0;for(let n=0;n<G.tasksArr.length;n++)G.tasksArr[n].project===t&&e++;return e}(t.name)})\n        </span></button>\n        <button class="project-edit-btn" index="${e}" value="${t.name}">\n        Edit\n        </button>\n        </li>\n    `;j.insertAdjacentHTML("beforeend",n)}))},M=document.querySelector(".addproject-btn"),S=document.querySelector(".addproject-wrapper");M.addEventListener("click",(()=>{M.classList.toggle("active"),M.classList.contains("active")?S.style.maxHeight=S.scrollHeight+"px":S.style.maxHeight=0}));const T=document.getElementById("add-task-btn"),N=document.querySelector(".task-form-wrapper");T.addEventListener("click",(()=>{T.classList.toggle("active"),T.classList.contains("active")?N.style.maxHeight=N.scrollHeight+"px":N.style.maxHeight=0}));const B=document.getElementById("close-modal-btn"),O=document.getElementById("project-dialog"),q=document.getElementById("dialog-title"),J=document.getElementById("delete-project-btn"),z=document.getElementById("rename"),F=document.getElementById("rename-submit"),P=document.getElementById("dialog-messages");function R(){const t=h.textContent;"Important"!==t?"Today"!==t?"Next 7 days"!==t?"My tasks"!=t?C(t):($(),H()):x(t):L(t):I(t)}function V(t,e){return`\n  <li class ="task-item" index="${e}">\n  <h3 class="task-title">${t.title}</h3>\n  <div class="task-date-project-wrapper"><div>${t.date}</div> / <div>${t.project}</div></div>\n  <p class="task-description">${t.description}</p>\n  <button class="priority" index="${e}" value="${t.priority}">\n  <svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" viewBox="0 -0.5 21 21" class="important-icon"><path d="M11.55 5.007v7c0 .552-.47 1-1.05 1s-1.05-.448-1.05-1v-7c0-.552.47-1 1.05-1s1.05.448 1.05 1h0zm0 10c0 .552-.47 1-1.05 1s-1.05-.448-1.05-1 .47-1 1.05-1 1.05.448 1.05 1h0zM18.9 17c0 .552-.47 1-1.05 1H3.15c-.58 0-1.05-.448-1.05-1V3c0-.552.47-1 1.05-1h14.7c.58 0 1.05.448 1.05 1v14zm0-17H2.1C.94 0 0 .899 0 2.003v.004 16C0 19.112.94 20 2.1 20h16.8c1.16 0 2.1-.892 2.1-1.997V2.007C21 .902 19.95 0 18.9 0h0z" fill-rule="evenodd"/></svg>\n  <span class="tooltiptext">Important status</span>  \n  </button>\n  <button class="delete" index="${e}">Done</button>\n</li>\n`}function Y(){b.valueAsDate=new Date}F.addEventListener("click",(function(){const t=z.value,e=q.textContent,n=K.projectsArr.findIndex((t=>t.name===q.textContent));z.value.length<3&&(P.textContent="Please specify a longer name"),void 0===K.projectsArr[n]?P.textContent="SHIIET ALREADY DELETED":(function(t,e){K.projectsArr[t].name=e,d()}(n,t),function(t,e){G.tasksArr.forEach((n=>{n.project===t&&(n.project=e)})),a()}(e,t),P.textContent=`Renamed to: ${t}`,q.textContent=t,z.value="",$(),D())})),j.addEventListener("click",(function(t){P.textContent="",t.target.classList.contains("project-edit-btn")&&(function(t){q.textContent=t.target.value,J.textContent="Delete",J.setAttribute("value",q.textContent)}(t),O.showModal())})),J.addEventListener("click",(function(){const t=K.projectsArr.findIndex((t=>t.name===q.textContent));var e;-1===t?J.textContent="Already deleted":(e=t,K.projectsArr.splice(e,1),d(),J.textContent="Deleted",$(),D(),function(){const t=document.createElement("button");t.textContent="Delete all tasks in this project?",P.appendChild(t),t.addEventListener("click",(()=>{var t;console.log("clicky micky"),t=q.textContent,G.tasksArr=G.tasksArr.filter((e=>e.project!==t)),a(),H()}))}())})),B.addEventListener("click",(()=>{O.close()}));const G={tasksArr:[{title:"A test task",description:"You can delete these tasks anytime you like",priority:"Important",project:"Default",date:"2024-02-09"},{title:"Doctor appointment",description:"Take 09.00AM bus",priority:"Not important",project:"Default",date:"2024-02-08"},{title:"Random title",description:"Just do it.",priority:"Not important",project:"Default",date:"2024-02-10"}]};let K={projectsArr:[{name:"Default"}]};!function(){const t=localStorage.getItem(l);t&&(K.projectsArr=JSON.parse(t))}(),function(){const t=localStorage.getItem(c);t&&(G.tasksArr=JSON.parse(t))}(),H(),$(),D(),y(),Y()})();