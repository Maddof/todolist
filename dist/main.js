(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}function n(t){const n=e(t);return n.setHours(0,0,0,0),n}function r(t){return e=t,r=Date.now(),+n(e)==+n(r);var e,r}function o(t,n){const r=e(t);return isNaN(n)?function(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}(t,NaN):n?(r.setDate(r.getDate()+n),r):r}function s(t,n){const r=+e(t),[o,s]=[+e(n.start),+e(n.end)].sort(((t,e)=>t-e));return r>=o&&r<=s}t.d({},{y:()=>Z,F:()=>X});const a=document.getElementById("all-tasks-amount"),c=document.getElementById("today-tasks-amount"),i=document.getElementById("next7days-tasks-amount"),l=document.getElementById("important-tasks-amount");function d(){a.textContent=`(${function(){let t=0;for(let e=0;e<X.tasksArr.length;e++)t++;return t}()})`,i.textContent=`(${function(){const t=new Date,e=o(t,7);let n=0;return X.tasksArr.forEach(((r,o)=>{s(r.date,{start:t,end:e})&&n++})),n}()})`,l.textContent=`(${function(){let t=0;return X.tasksArr.forEach(((e,n)=>{"Important"===e.priority&&t++})),t}()})`,c.textContent=`(${function(){let t=0;return X.tasksArr.forEach(((e,n)=>{r(e.date)&&t++})),t}()})`}const u="tasks",m=function(){localStorage.setItem(u,JSON.stringify(X.tasksArr))};function p(t){return t.target.attributes.index.value}const f="projects",g=function(){localStorage.setItem(f,JSON.stringify(Z.projectsArr))},y=document.querySelector(".tasks"),v=document.querySelector(".addtask-form"),k=document.querySelector(".addproject-form"),b=document.querySelector(".projects"),A=document.getElementById("project-selection"),j=document.getElementById("date");let E=document.querySelector(".currentview-title");function h(t){const e=new Date,n=o(e,7);y.innerHTML="",C(t),X.tasksArr.forEach(((t,r)=>{if(s(t.date,{start:e,end:n})){const e=R(t,r);y.insertAdjacentHTML("beforeend",e)}}))}function x(t){y.innerHTML="",C(t),X.tasksArr.forEach(((t,e)=>{if(r(t.date)){const n=R(t,e);y.insertAdjacentHTML("beforeend",n)}}))}y.addEventListener("click",(function(t){if(t.target.classList.contains("priority")){const e=p(t);"Not important"===X.tasksArr[e].priority?X.tasksArr[e].priority="Important":X.tasksArr[e].priority="Not important",F(),m()}})),y.addEventListener("click",(function(t){if(t.target.classList.contains("delete")){const e=p(t);X.tasksArr.splice(e,1),w(),d(),F()}m()})),v.addEventListener("submit",(function(t){0===A.length?(t.preventDefault(),alert("Please specify or create a project first")):(function(t){t.preventDefault();let e=new FormData(v),n=Object.fromEntries(e);X.tasksArr.push(n),m()}(t),v.reset(),V(),F(),d(),w())})),k.addEventListener("submit",(function(t){(function(t){t.preventDefault();let e=new FormData(k),n=Object.fromEntries(e);Z.projectsArr.push(n),g()})(t),k.reset(),w(),L()}));const L=function(){A.innerHTML="",Z.projectsArr.forEach((t=>{const e=`\n      <option value="${t.name}">${t.name}</option>\n    `;A.insertAdjacentHTML("beforeend",e)}))},D=function(t){y.innerHTML="",C(t),X.tasksArr.forEach(((e,n)=>{if(e.priority===t){const t=R(e,n);y.insertAdjacentHTML("beforeend",t)}}))},I=function(t){y.innerHTML="",function(t){const e=A.children,n=t;[...e].forEach((t=>{t.value===n?t.setAttribute("selected",""):t.removeAttribute("selected","")}))}(t),X.tasksArr.forEach(((e,n)=>{if(e.project===t){const t=R(e,n);y.insertAdjacentHTML("beforeend",t)}}))},C=function(t){E.textContent=t||"My tasks"},H=function(){y.innerHTML="",C(),X.tasksArr.forEach(((t,e)=>{const n=R(t,e);y.insertAdjacentHTML("beforeend",n)}))},w=function(){b.innerHTML="",Z.projectsArr.forEach(((t,e)=>{const n=`\n      <li class="project-item">\n        <button class="project-btn" index="${e}" value="${t.name}">\n        ${t.name} \n        <span class="project-task-count-info">\n        (${function(t){let e=0;for(let n=0;n<X.tasksArr.length;n++)X.tasksArr[n].project===t&&e++;return e}(t.name)})\n        </span></button>\n        <button class="project-edit-btn" index="${e}" value="${t.name}">\n        Edit\n        </button>\n        </li>\n    `;b.insertAdjacentHTML("beforeend",n)}))},S=document.getElementById("add-task-btn"),$=document.querySelector(".task-form-wrapper");S.addEventListener("click",(()=>{S.classList.toggle("active"),S.classList.contains("active")?$.style.maxHeight=$.scrollHeight+"px":$.style.maxHeight=0}));const M=document.getElementById("rename-project-btn"),T=document.getElementById("rename-form");M.addEventListener("click",(()=>{M.classList.toggle("active"),M.classList.contains("active")?T.style.maxHeight=T.scrollHeight+"px":T.style.maxHeight=0}));const N=document.getElementById("close-modal-btn"),B=document.getElementById("project-dialog"),q=document.getElementById("dialog-title"),O=document.getElementById("delete-project-btn"),J=document.getElementById("rename"),z=document.getElementById("rename-submit"),P=document.getElementById("dialog-messages");function F(){const t=E.textContent;"Important"!==t?"Today"!==t?"Next 7 days"!==t?"My tasks"!=t?I(t):(w(),H()):h(t):x(t):D(t)}function R(t,e){return`\n  <li class ="task-item" index="${e}">\n  <h3 class="task-title">${t.title}</h3>\n  <div class="task-date-project-wrapper"><div>${t.date}</div> / <div>${t.project}</div></div>\n  <p class="task-description">${t.description}</p>\n  <button class="priority" index="${e}" value="${t.priority}">\n  <svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" viewBox="0 -0.5 21 21" class="important-icon"><path d="M11.55 5.007v7c0 .552-.47 1-1.05 1s-1.05-.448-1.05-1v-7c0-.552.47-1 1.05-1s1.05.448 1.05 1h0zm0 10c0 .552-.47 1-1.05 1s-1.05-.448-1.05-1 .47-1 1.05-1 1.05.448 1.05 1h0zM18.9 17c0 .552-.47 1-1.05 1H3.15c-.58 0-1.05-.448-1.05-1V3c0-.552.47-1 1.05-1h14.7c.58 0 1.05.448 1.05 1v14zm0-17H2.1C.94 0 0 .899 0 2.003v.004 16C0 19.112.94 20 2.1 20h16.8c1.16 0 2.1-.892 2.1-1.997V2.007C21 .902 19.95 0 18.9 0h0z" fill-rule="evenodd"/></svg>\n  <span class="tooltiptext">Important status</span>  \n  </button>\n  <button class="delete" index="${e}">Done</button>\n</li>\n`}function V(){j.valueAsDate=new Date}z.addEventListener("click",(function(){const t=J.value,e=q.textContent,n=Z.projectsArr.findIndex((t=>t.name===q.textContent));J.value.length<3&&(P.textContent="Please specify a longer name"),void 0===Z.projectsArr[n]?P.textContent="SHIIET ALREADY DELETED":(function(t,e){Z.projectsArr[t].name=e,g()}(n,t),function(t,e){X.tasksArr.forEach((n=>{n.project===t&&(n.project=e)})),m()}(e,t),P.textContent=`Renamed to: ${t}`,q.textContent=t,J.value="",w(),L())})),b.addEventListener("click",(function(t){P.textContent="",t.target.classList.contains("project-edit-btn")&&(function(t){q.textContent=t.target.value,O.textContent="Delete",O.setAttribute("value",q.textContent)}(t),B.showModal())})),O.addEventListener("click",(function(){const t=Z.projectsArr.findIndex((t=>t.name===q.textContent));var e;-1===t?O.textContent="Already deleted":(e=t,Z.projectsArr.splice(e,1),g(),O.textContent="Deleted",w(),L(),function(){if(X.tasksArr.filter((t=>t.project===q.textContent)).length>0){const t=document.createElement("button");t.textContent="Delete all tasks in this project?",P.appendChild(t),t.addEventListener("click",(()=>{var e;e=q.textContent,X.tasksArr=X.tasksArr.filter((t=>t.project!==e)),m(),d(),H(),t.remove()}))}}())})),N.addEventListener("click",(()=>{B.close()}));const Y=document.querySelector(".left-panel"),G=document.querySelector(".mobile-nav-btn"),K=document.querySelector(".tasks-filter"),Q=document.querySelector(".addproject-btn"),U=document.querySelector(".addproject-wrapper");function W(){const t=Y.getAttribute("mobile-visible");"false"===t?(Y.setAttribute("mobile-visible","true"),G.setAttribute("aria-expanded","true")):"true"===t&&(Y.setAttribute("mobile-visible","false"),G.setAttribute("aria-expanded","false"))}G.addEventListener("click",W),K.addEventListener("click",(function(t){const e=t.target.childNodes[0].textContent.trim();switch(console.log(e),e){case"All Tasks":W(),H();break;case"Next 7 days":W(),h(e);break;case"Important":W(),D(e);break;case"Today":W(),x(e)}})),b.addEventListener("click",(t=>{t.target.classList.contains("project-btn")&&(W(),I(t.target.value),C(t.target.value))})),Q.addEventListener("click",(()=>{Q.classList.toggle("active"),Q.classList.contains("active")?U.style.maxHeight=U.scrollHeight+"px":U.style.maxHeight=0}));const X={tasksArr:[{title:"A test task",description:"You can delete these tasks anytime you like",priority:"Important",project:"Default",date:"2024-02-09"},{title:"Doctor appointment",description:"Take 09.00AM bus",priority:"Not important",project:"Default",date:"2024-02-08"},{title:"Random title",description:"Just do it.",priority:"Not important",project:"Default",date:"2024-02-10"}]};let Z={projectsArr:[{name:"Default"}]};!function(){const t=localStorage.getItem(f);t&&(Z.projectsArr=JSON.parse(t))}(),function(){const t=localStorage.getItem(u);t&&(X.tasksArr=JSON.parse(t))}(),H(),w(),L(),d(),V()})();